<?xml version="1.0"?>
<document>

  <properties>
    <author>Ceki Gulcu</author>
    <title>Universal and Generic Logging Interface (UGLI) </title>
  </properties>

  <body>

    <h1>Universal and Generic Logging Interface (UGLI)</h1>

      <p>The Universal and Generic Logging Interface or UGLI is
      intended to serve as a simple abstraction of various logging
      APIs allowing to plug in the desired implementation at
      deployment time. Note that log4j version 1.3 and later support
      UGLI directly. Log4j is implemented in terms of the UGLI
      interfaces.
      </p>

      <h2>Typical usage pattern</h2>

      <pre class="source">
 1: <b>import org.apache.ugli.ULogger;</b>
 2: <b>import org.apache.ugli.LoggerFactory;</b>
 3: 
 4: public class Wombat {
 5:  
 6:   <b>final ULogger logger = LoggerFactory.getLogger(Wombat.class);</b>
 7:   Integer t;
 8:   Integer oldT;
 9:
10:   public void setTemperature(Integer temparature) {
11:    
12:     oldT = t;        
13:     t = temperature;
14:
15:     <b>logger.debug("Temperature set to {}. Old temperature was {}.", t, oldT);</b>
16:
17:     if(temperature.intValue() > 50) {
18:       <b>logger.info("Temperature has risen above 50 degrees".);</b>
19:     }
20:   }
21: }
      </pre>
      
      <p>The example above illustrates the typical usage pattern for
      UGLI. Note the use of parameterized log messages on line 15. See
      the question <a
      href="http://logging.apache.org/log4j/docs/faq.html#2.3">
      "What is the fastest way of (not) logging?"</a> in the log4j
      FAQ for more details.
      </p>

      <h2>Swapping implementations at deployment time</h2>

        <p>UGLI currently supports four implementations, namely, NOP,
        Simple, JDK 1.4 logging and log4j. Log4j 1.3 ships with four
        jar files <em>ugli-nop.jar</em>, <em>ugli-simple.jar</em>,
        <em>ugli-jdk14.jar</em> and <em>log4j.jar</em>. Each of these
        jar files are hardwired <em>at compile-time</em> to use just one 
        implementation,  that is NOP, Simple, JDK 1.4 logging and log4j, 
        respectively.
        </p>

        <p>Small applications where configuring log4j can be somewhat
        of an overkill can drop in <em>ugli-simple.jar</em> in place
        of <em>log4j.jar</em>. 
        </p>

        <p>Authors of widely-distributed components and libraries may
        code against the UGLI interface in order to avoid imposing an
        logging API implementation on the end-user.  At deployment
        time, the end-user may choose the desired logging API
        implementation by inserting the corresponding jar file in her
        classpath. This stupid, simple but robust approach avoids many
        of the painful bugs associated with dynamic discovery
        processes. Life is too short to be spending it hunting down
        class loader problems.
        </p>
     
        <h2>Simplicity</h2>

        <p>The UGLI interfaces and their various adapters are
        extremely simple. Most developers familiar with the Java
        language should be able to read and fully understand the code
        in less than one hour. 
        </p>           

        <p>As noted earlier, UGLI does not rely on any classloader
        tricks. Every variant of <em>ugli-&lt;impl&gt;.jar</em> is
        statically hardwired (at compile time) to use one specific
        implementation. Thus, UGLI suffers from none of the <a
        href="http://www.qos.ch/logging/classloader.jsp">class loader
        problems observed when using JCL</a>.</p>
        
        <p>We hope that simplicity of the UGLI interfaces and the
        deployment model will make it easy for developers of other
        logging APIs to conform to the UGLI model.
        </p>

        <h2>Built-in support in log4j</h2>

        <p>The <code>Logger</code> class in log4j directly implements
        UGLI's <code>ULogger</code> interface. Moreover, log4j makes
        extensive use of UGLI internally.
        </p>
        
        <p>Log4j's built-in support for UGLI means that the adapter
        for log4j does not need to wrap log4j objects in order to make
        them conform to UGLI's <code>ULogger</code> interface. A log4j
        <code>Logger</code> <em>is</em> a <code>ULogger</code>. Thus,
        using UGLI in conjunction with log4j involves strictly zero
        memory overhead and near-zero computational overhead. The
        computational overhead is so small as to be unobservable.
        </p>

        <h2>Where can I get UGLI?</h2>

        <p>UGLI ships with log4j version 1.3alpha-6 and later.</p>
        
        <h2>Summary</h2>

        <table class="ls" cellspacing="4" cellpadding="4">
          <tr>
            <th align="left">Advantage</th>
            <th align="left">Description</th>
          </tr>

          <tr>
            <td>Fail-safe operation</td>
            <td>Assuming the appropriate jar file is available on the
            classpath, under no circumstances will UGLI cause your
            application to fail. This is because no UGLI class loaded
            in memory will <em>ever</em> throw an exception.

            <p>Contrast this with
            <code>LogConfigurationException</code> thrown by
            commons-logging which will cause your otherwise
            functioning application to fail. Commons-logging will
            throw a <code>LogConfigurationException</code> in case the
            <a
            href="http://jakarta.apache.org/commons/logging/api/org/apache/commons/logging/Log.html">Log</a>
            interface and its dynamically discovered implementation
            are loaded by different class loaders.
            </p>
            </td>
          </tr>

          <tr>
            <td>Swappable logging API implementations</td>
            <td>The desired logging API can be plugged in at
            deployment time by inserting the appropriate jar file on
            the classpath.
            </td>
          </tr>

          <tr>
            <td>Adapter implementations for the most popular APIs
            </td>

            <td>UGLI supports the most popular logging APIs, namely
            log4j, JDK 1.4 logging, Simple logging and NOP.
            </td>
          </tr>

          <tr>
            <td>Support for parameterized log messages</td>

            <td>All UGLI adapters support parameterized log messages.</td>
          </tr>

          <tr>
            <td>Built-in support in log4j</td>

            <td>Log4j's built-in support for UGLI directly translates
            into smaller memory footprint and better CPU efficiency.
            </td>
          </tr>
        </table>
        
  </body>  

</document>
