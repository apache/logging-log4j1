<project name="slf4j" default="usage" basedir="." >

  <!-- The directory where source files are stored. -->
  <property name="java.source.dir" value="./src/java/"/>

  <!-- Destination for compiled files -->
  <property name="javac.dest" value="./classes"/>
	
  <!-- The directory where source files are stored. -->
  <property name="version" value="1.0alpha"/>

  <!-- Deprecation warning? --> 
  <property name="deprecation" value="on"/>

	
  <property name="SLF4J_STEM" value="org/slf4j"/>
  

  <!-- ================================================================= -->
  <!-- Default target                                                    -->
  <!-- ================================================================= -->
  <target name="usage">
    <echo>      
      These are some of the targets supported by this ANT build scpript:
      
      svnCheckout - get SLF4J files into src/filtered-java

      refresh-slf4j - copy source files into the log4j source tree, using
    	              variable substitution
    </echo>
  </target>

  <target name="init">
    <mkdir dir="tmp"/>
	<mkdir dir="${java.source.dir}/${SLF4J_STEM}"/>
  </target>
	
  <!-- ================================================================= -->
  <!-- Remove all generated (compiled) class files.                      -->
  <!-- ================================================================= -->
  <target name="clean" description="Delete all compiled SLF4J files.">
    <delete dir="${javac.dest}/org/slf4j" />
  </target>

  <!-- =================================================================== -->
  <!-- Copy SLF4J files into log4j source tree. This step is necessary for -->
  <!-- building log4j. However, it needs to be done whenever code in SLF4J -->
  <!-- changes, that is seldom                                             -->
  <!-- =================================================================== -->
  <target name="refresh-slf4j" depends="init, svnCheckout">	
  	<!-- delete any stale copy of LoggerFactory.java -->
 	<delete>
 		<fileset dir="src/java/org/slf4j" 
 		         includes="**/*.java"
	             excludes="impl/Log4jLoggerFA.java"/>
 	</delete>
  	
   	<!-- copy a filtered version of slf4j to tmp/src -->
  	<copy todir="src/java">
  	  <fileset dir="src/filtered-java">
  	  	<include name="**/*.java"/>
  	    <exclude name="**/impl/JDK14*.java"/>
  	  </fileset>
  	  <filterset><filter token="IMPL" value="Log4j"/></filterset>
  	</copy>
  </target>


  <target name="svnCheckout">
    <property name="repository.URL" value="http://svn.slf4j.org/repos/slf4j/trunk/src/filtered-java"/>
	<java classname="org.tmatesoft.svn.cli.SVN" dir="src/" fork="true">
	   <arg value="co"/>
	   <arg value="${repository.URL}"/>
	   <arg value="filtered-java"/>
	   <classpath>
	     <pathelement location="lib/javasvn.jar" />
	     <pathelement location="lib/javasvn-cli.jar" />
	   </classpath>
	</java>
  </target>
	
</project>
